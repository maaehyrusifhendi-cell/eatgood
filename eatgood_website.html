<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>NutriWise Nutrient Calculator (Demo)</title>
<style>
  body {font-family: "Segoe UI", Arial, sans-serif; background:#f8faf8; color:#222; margin:0;}
  header {background:#2e8b57; color:#fff; text-align:center; padding:1rem;}
  main {padding:1rem 2%;}
  .input-box {display:flex; flex-wrap:wrap; gap:1rem; align-items:center; margin-bottom:1rem;}
  select, input {padding:.6rem; border:1px solid #ccc; border-radius:.4rem; font-size:1rem;}
  table {border-collapse:collapse; width:100%; overflow-x:auto; display:block;}
  th, td {border:1px solid #e0e0e0; padding:.4rem .6rem; text-align:right; white-space:nowrap;}
  th {background:#e9f5ec; color:#256f45; position:sticky; top:0;}
  td:first-child, th:first-child {text-align:left;}
  tr:nth-child(even){background:#fdfdfd;}
  footer{text-align:center;font-size:.9rem;color:#555;padding:1rem 0;margin-top:2rem;border-top:1px solid #ddd;}
</style>
</head>
<body>
<header>
  <h1>NutriWise Nutrient Calculator (Demo)</h1>
  <p>Per 1 g basis • WHO/FAO RDA • 5 Foods</p>
</header>

<main>
  <div class="input-box">
    <label for="foodSelect"><strong>Select Food:</strong></label>
    <select id="foodSelect"></select>

    <label for="grams"><strong>Quantity (g):</strong></label>
    <input id="grams" type="number" min="0" step="0.1" placeholder="e.g. 100" />
  </div>

  <table id="nutrientTable">
    <thead>
      <tr>
        <th>Nutrient</th>
        <th>Intake (g / kcal / mg)</th>
        <th>% RDA</th>
      </tr>
    </thead>
    <tbody id="nutrientBody"></tbody>
  </table>
</main>

<footer>© 2025 NutriWise – Eat Smart, Live Healthy</footer>

<script>
// ===== Sample nutrient data per 1 g of food (rounded to 2 dp) =====
const foodData = {
  "Hausa koko": {
    "Water (g)":0.14,"kcal":1.22,"Protein (g)":0.02,"Total fat (g)":0.01,"Carbohydrates (g)":0.25,
    "Iron (mg)":0.01,"Calcium (mg)":0.08
  },
  "Rice porridge": {
    "Water (g)":0.72,"kcal":0.98,"Protein (g)":0.03,"Total fat (g)":0.01,"Carbohydrates (g)":0.22,
    "Iron (mg)":0.02,"Calcium (mg)":0.05
  },
  "Corn porridge": {
    "Water (g)":0.60,"kcal":1.05,"Protein (g)":0.03,"Total fat (g)":0.01,"Carbohydrates (g)":0.23,
    "Iron (mg)":0.02,"Calcium (mg)":0.06
  },
  "Oblayo": {
    "Water (g)":0.30,"kcal":1.10,"Protein (g)":0.03,"Total fat (g)":0.01,"Carbohydrates (g)":0.24,
    "Iron (mg)":0.02,"Calcium (mg)":0.07
  },
  "Weetabix": {
    "Water (g)":0.08,"kcal":3.60,"Protein (g)":0.12,"Total fat (g)":0.02,"Carbohydrates (g)":0.74,
    "Iron (mg)":0.08,"Calcium (mg)":0.06
  }
};

// ===== WHO/FAO adult RDA values =====
const RDA = {
  "Water (g)":2700,"kcal":2000,"Protein (g)":50,"Total fat (g)":70,"Carbohydrates (g)":310,
  "Iron (mg)":18,"Calcium (mg)":1000
};

// ===== Formula functions mirroring Excel logic =====
function energyContrib(p,f,c){
  const energy = (p*4 + f*9 + c*4);
  const pctProtein = (p*4/energy)*100;
  const pctFat = (f*9/energy)*100;
  const pctCarb = (c*4/energy)*100;
  return {energy,pctProtein,pctFat,pctCarb};
}

// ===== Interface population =====
const foodSelect = document.getElementById("foodSelect");
const gramsInput = document.getElementById("grams");
const body = document.getElementById("nutrientBody");

Object.keys(foodData).forEach(f=>{
  const opt=document.createElement("option");
  opt.value=f; opt.textContent=f;
  foodSelect.appendChild(opt);
});

function updateTable(){
  const food=foodSelect.value;
  const grams=parseFloat(gramsInput.value)||0;
  const data=foodData[food];
  body.innerHTML="";

  // compute energy contributions
  const ecalc=energyContrib(data["Protein (g)"],data["Total fat (g)"],data["Carbohydrates (g)"]);
  data["kcal (from macro)"]=ecalc.energy;
  data["Protein % Energy"]=ecalc.pctProtein;
  data["Fat % Energy"]=ecalc.pctFat;
  data["Carb % Energy"]=ecalc.pctCarb;

  for(let n in data){
    const valPerG=data[n];
    const intake=valPerG*grams;
    const rda=RDA[n]||0;
    const pct=rda?(intake/rda)*100:0;
    const row=document.createElement("tr");
    row.innerHTML=`
      <td>${n}</td>
      <td>${intake.toFixed(2)}</td>
      <td>${pct.toFixed(2)}%</td>`;
    body.appendChild(row);
  }
}
foodSelect.addEventListener("change",updateTable);
gramsInput.addEventListener("input",updateTable);
foodSelect.selectedIndex=0;
updateTable();
</script>
</body>
</html>
